<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.1">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2022-03-17T13:22:43+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">Ash Blog</title><subtitle>ì´ê²ƒì €ê²ƒ ê¸°ë¡ ì¼ì§€.</subtitle><author><name>Ashley</name></author><entry><title type="html">MySQLì—ì„œ LIKE IN ëŒ€ì‹  ì‚¬ìš©ê°€ëŠ¥í•œ REGEXP</title><link href="http://localhost:4000/mysql/mysqluse_1/" rel="alternate" type="text/html" title="MySQLì—ì„œ LIKE IN ëŒ€ì‹  ì‚¬ìš©ê°€ëŠ¥í•œ REGEXP" /><published>2022-03-16T00:00:00+09:00</published><updated>2022-03-16T00:00:00+09:00</updated><id>http://localhost:4000/mysql/mysqluse_1</id><content type="html" xml:base="http://localhost:4000/mysql/mysqluse_1/"><![CDATA[<p>í•œ ì»¬ëŸ¼ì— ì—¬ëŸ¬ ê°’ì´ ì €ì¥ë˜ìˆëŠ” ê²½ìš°, LIKEë¥¼ ì´ìš©í•´ì„œ ì—¬ëŸ¬ ì¡°ê±´ì„ ê²€ìƒ‰í•˜ê³  ì‹¶ì—ˆë‹¤.<br />
LIKEì™€ INì„ í•¨ê»˜ ì“¸ ìˆ˜ ìˆë‚˜ ì°¾ì•„ë´¤ì§€ë§Œ MySQLì—ì„œëŠ” ë¶ˆê°€ëŠ¥í–ˆê³ ğŸ˜¥ 
ëŒ€ì²´ ë°©ì•ˆìœ¼ë¡œ <strong>REGEXP</strong>ë¥¼ ì°¾ì•„ëƒˆë‹¤.</p>

<div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">SELECT</span>
       <span class="n">a</span><span class="p">.</span><span class="n">certificate</span> <span class="k">AS</span> <span class="s1">'ê´€ì‹¬ìê²©ì¦'</span>
    <span class="k">FROM</span>
         <span class="s1">'í…Œì´ë¸”ëª…'</span> <span class="k">AS</span> <span class="n">a</span>
    <span class="k">WHERE</span>
        <span class="n">a</span><span class="p">.</span><span class="n">certificate</span> <span class="n">REGEXP</span> <span class="s1">'part2_no57_lecture|part2_no2_lecture'</span>
    <span class="k">ORDER</span> <span class="k">BY</span>
        <span class="n">regdate</span> <span class="k">DESC</span><span class="p">;</span>
</code></pre></div></div>

<figure style="display:block; text-align:center;">
    <img src="/assets/images/mysqluse_1.png" width="90%" height="90%" title="ì¿¼ë¦¬ ê²°ê³¼ê°’" alt="ì¿¼ë¦¬ ê²°ê³¼ê°’" /> 
    <figcaption style="text-align:center; font-size:15px; color:#808080">
        (ê¸°ì¡´ ë°ì´í„°ë“¤ì´ json ì‹ìœ¼ë¡œ ì €ì¥ ë˜ìˆë‹¤..ì™œ ì´ë ‡ê²Œ ì €ì¥í–ˆì„ê¹Œ..ì•„ì£¼ ì—‰ë§ì§„ì°½ğŸ¤¬)<br />
        ìœ„ì— ì¿¼ë¦¬ë¬¸ì²˜ëŸ¼ ì…ë ¥í•˜ë©´ 'part2_no57_lecture' ì™€ 'part2_no2_lecture'ê°€ í•´ë‹¹ë˜ìˆëŠ”<br />
        ê²°ê³¼ê°’ì´ ì¡°íšŒë˜ëŠ”ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤.<br />
        LIKEë¡œë§Œ ì¡°ê±´ì„ ê²€ìƒ‰í–ˆë”ë¼ë©´ êµ‰ì¥íˆ ê¸¸ê³  íš¨ìœ¨ì„±ì—†ëŠ” ì¿¼ë¦¬ë¬¸ì„ ì§¤ ìˆ˜ ë°–ì—ì—†ì—ˆëŠ”ë°,<br />
        REGEXPê°€ ë‚  ì‚´ë ¸ë‹¤!
    </figcaption>
</figure>]]></content><author><name>Ashley</name></author><category term="MySQL" /><category term="mysql" /><summary type="html"><![CDATA[í•œ ì»¬ëŸ¼ì— ì—¬ëŸ¬ ê°’ì´ ì €ì¥ë˜ìˆëŠ” ê²½ìš°, LIKEë¥¼ ì´ìš©í•´ì„œ ì—¬ëŸ¬ ì¡°ê±´ì„ ê²€ìƒ‰í•˜ê³  ì‹¶ì—ˆë‹¤. LIKEì™€ INì„ í•¨ê»˜ ì“¸ ìˆ˜ ìˆë‚˜ ì°¾ì•„ë´¤ì§€ë§Œ MySQLì—ì„œëŠ” ë¶ˆê°€ëŠ¥í–ˆê³ ğŸ˜¥ ëŒ€ì²´ ë°©ì•ˆìœ¼ë¡œ REGEXPë¥¼ ì°¾ì•„ëƒˆë‹¤.]]></summary></entry><entry><title type="html">There are no gemspecs at ì˜¤ë¥˜ ë°œìƒì‹œ í•´ê²°ë°©ì•ˆ</title><link href="http://localhost:4000/etc/bundlererror/" rel="alternate" type="text/html" title="There are no gemspecs at ì˜¤ë¥˜ ë°œìƒì‹œ í•´ê²°ë°©ì•ˆ" /><published>2022-03-11T00:00:00+09:00</published><updated>2022-03-11T00:00:00+09:00</updated><id>http://localhost:4000/etc/bundlererror</id><content type="html" xml:base="http://localhost:4000/etc/bundlererror/"><![CDATA[<p>ê¹ƒí—ˆë¸Œ ë¸”ë¡œê·¸ë¥¼ localì—ì„œ ì‹¤í–‰í•˜ë ¤ê³  í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œ ìˆœê°„,</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bundle <span class="nb">exec </span>jekyll serve 
</code></pre></div></div>
<p><br /><br /></p>

<p>ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.</p>

<figure style="display:block; text-align:center;">
    <img src="/assets/images/bundler_error.png" width="90%" height="90%" title="bundlerì‹¤í–‰ì‹œ ì—ëŸ¬" alt="bundlerì‹¤í–‰ì‹œ ì—ëŸ¬ë‚˜ëŠ” í™”ë©´" /> 
        <figcaption style="text-align:center; font-size:15px; color:#f00">
            [!] There was an error parsing `Gemfile`: There are no gemspecs at /home/ashley/seolhee-choi.github.io. Bundler cannot continue.
        </figcaption><br />
    <img src="/assets/images/gemfile.png" width="90%" height="10%" title="gemfileì„ íƒ" alt="Gemfileì„ íƒ" /> 
        <figcaption style="text-align:center; font-size:15px; color:#000">
            ì‚¬ì§„ì— ìˆëŠ” Gemfileì„ ëˆŒëŸ¬ì„œ ë“¤ì–´ê°„ë’¤
        </figcaption><br />
    <img src="/assets/images/gemfile2.png" width="90%" height="90%" title="gemfileë‚´ìš© ìˆ˜ì •1" alt="gemfileë‚´ìš© ìˆ˜ì •1" /> 
        <figcaption style="text-align:center; font-size:15px; color:#000">
            #gemspec í•˜ë‹¨ì— ì•„ë˜ 3ì¤„ì„ ì¶”ê°€í–ˆë‹¤.
        </figcaption><br />
    <img src="/assets/images/gemfile3.png" width="90%" height="90%" title="gemfileë‚´ìš© ìˆ˜ì •2" alt="gemfileë‚´ìš© ìˆ˜ì •2" /> <br /><br />
    <img src="/assets/images/bundler_success.png" width="90%" height="90%" title="bundlerì„±ê³µì‹œ í™”ë©´" alt="bundlerì„±ê³µì‹œ í™”ë©´" /> 
        <figcaption style="text-align:center; font-size:15px; color:#000">
            ë‹¤ì‹œ 'bundle exec jekyll serve' ëª…ë ¹ì–´ ì…ë ¥í•´ë³´ë©´ ì •ìƒìœ¼ë¡œ ì‘ë™ë˜ëŠ” ê²ƒì´ í™•ì¸ë¨     
        </figcaption>
</figure>]]></content><author><name>Ashley</name></author><category term="ETC" /><category term="etc" /><summary type="html"><![CDATA[ê¹ƒí—ˆë¸Œ ë¸”ë¡œê·¸ë¥¼ localì—ì„œ ì‹¤í–‰í•˜ë ¤ê³  í•´ë‹¹ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•œ ìˆœê°„,]]></summary></entry><entry><title type="html">Ubuntuí´ë” ìœˆë„ìš°(windows)ì—ì„œ ì—´ê¸°</title><link href="http://localhost:4000/ubuntu/ubuntuopen/" rel="alternate" type="text/html" title="Ubuntuí´ë” ìœˆë„ìš°(windows)ì—ì„œ ì—´ê¸°" /><published>2022-03-10T00:00:00+09:00</published><updated>2022-03-10T00:00:00+09:00</updated><id>http://localhost:4000/ubuntu/ubuntuopen</id><content type="html" xml:base="http://localhost:4000/ubuntu/ubuntuopen/"><![CDATA[<p>windowsë¥¼ ì‚¬ìš©í•˜ë©´ì„œ wslì„ ì„¤ì¹˜í•´ ubuntuë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒì´ë¼ë©´
ìœˆë„ìš°ì—ì„œ ubuntu í´ë”ë¥¼ ì—´ì–´ë³´ê³  ì‹¶ì€ ê²½ìš°ê°€ ìˆë‹¤.
ê·¸ëŸ´ ë•Œ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ëŠ”</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>explorer.exe <span class="nb">.</span>
</code></pre></div></div>
<figure style="display:block; text-align:center;">
    <img src="/assets/images/ubuntu_1.png" width="90%" height="90%" title="ubuntu ëª…ë ¹ì–´ ì…ë ¥" alt="ubuntu ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ëŠ” í™”ë©´" /> 
    <figcaption style="text-align:center; font-size:15px; color:#808080">
        ì´ë ‡ê²Œ ëª…ë ¹ì–´ë¥¼ ì…ë ¥í•˜ë©´
    </figcaption>
    <img src="/assets/images/ubuntu_open.png" width="90%" height="90%" title="ubuntu ëª…ë ¹ì–´ ì‹¤í–‰" alt="ubuntu ëª…ë ¹ì–´ ì…ë ¥ì‹œ ì‹¤í–‰ë˜ëŠ” í™”ë©´" /> 
    <figcaption style="text-align:center; font-size:15px; color:#808080">
        ìœˆë„ìš°ì—ì„œ í•´ë‹¹ í´ë”ê°€ ìˆëŠ” ì°½ì´ ì—´ë¦°ë‹¤.
    </figcaption>
</figure>]]></content><author><name>Ashley</name></author><category term="Ubuntu" /><category term="ubuntu" /><summary type="html"><![CDATA[windowsë¥¼ ì‚¬ìš©í•˜ë©´ì„œ wslì„ ì„¤ì¹˜í•´ ubuntuë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒì´ë¼ë©´ ìœˆë„ìš°ì—ì„œ ubuntu í´ë”ë¥¼ ì—´ì–´ë³´ê³  ì‹¶ì€ ê²½ìš°ê°€ ìˆë‹¤. ê·¸ëŸ´ ë•Œ ê°„ë‹¨í•˜ê²Œ ì‚¬ìš©í•˜ëŠ” ëª…ë ¹ì–´ëŠ”]]></summary></entry><entry><title type="html">í¬ìŠ¤íŒ… í…ŒìŠ¤íŠ¸</title><link href="http://localhost:4000/php/first-post/" rel="alternate" type="text/html" title="í¬ìŠ¤íŒ… í…ŒìŠ¤íŠ¸" /><published>2022-02-22T00:00:00+09:00</published><updated>2022-02-22T00:00:00+09:00</updated><id>http://localhost:4000/php/first-post</id><content type="html" xml:base="http://localhost:4000/php/first-post/"><![CDATA[<p>í¬ìŠ¤íŒ… í…ŒìŠ¤íŠ¸ì¤‘ ğŸˆ</p>]]></content><author><name>Ashley</name></author><category term="Php" /><category term="php" /><summary type="html"><![CDATA[í¬ìŠ¤íŒ… í…ŒìŠ¤íŠ¸ì¤‘ ğŸˆ]]></summary></entry><entry><title type="html">IntelliJ IDEA ìœˆë„ìš° ë‹¨ì¶•í‚¤</title><link href="http://localhost:4000/java/intellij-post/" rel="alternate" type="text/html" title="IntelliJ IDEA ìœˆë„ìš° ë‹¨ì¶•í‚¤" /><published>2022-02-22T00:00:00+09:00</published><updated>2022-02-22T00:00:00+09:00</updated><id>http://localhost:4000/java/intellij-post</id><content type="html" xml:base="http://localhost:4000/java/intellij-post/"><![CDATA[<p>[IntelliJ IDEA ìœˆë„ìš°ë²„ì „ ë‹¨ì¶•í‚¤]</p>

<p>ctrl + alt + v : ë³€ìˆ˜ ì¶”ì¶œ(Extract Variable) Optional ë¶ˆëŸ¬ì˜´
ctrl + alt + m : ë¦¬íŒ©í† ë§ ë‹¨ì¶•í‚¤(Extract Method)</p>

<p>shift + f6 : í´ë” ë° íŒŒì¼ëª… ë³€ê²½(Rename)
classì—ì„œ ctrl + shift + t í•˜ë©´ createTest ë§Œë“¤ì–´ì§</p>]]></content><author><name>Ashley</name></author><category term="Java" /><category term="java" /><summary type="html"><![CDATA[[IntelliJ IDEA ìœˆë„ìš°ë²„ì „ ë‹¨ì¶•í‚¤] ctrl + alt + v : ë³€ìˆ˜ ì¶”ì¶œ(Extract Variable) Optional ë¶ˆëŸ¬ì˜´ ctrl + alt + m : ë¦¬íŒ©í† ë§ ë‹¨ì¶•í‚¤(Extract Method) shift + f6 : í´ë” ë° íŒŒì¼ëª… ë³€ê²½(Rename) classì—ì„œ ctrl + shift + t í•˜ë©´ createTest ë§Œë“¤ì–´ì§]]></summary></entry><entry><title type="html">GET ë°©ì‹ìœ¼ë¡œ í• ì¸ ì¿ í° ë°œê¸‰í•˜ëŠ” ë°©ë²•</title><link href="http://localhost:4000/php/couponsend/" rel="alternate" type="text/html" title="GET ë°©ì‹ìœ¼ë¡œ í• ì¸ ì¿ í° ë°œê¸‰í•˜ëŠ” ë°©ë²•" /><published>2022-02-22T00:00:00+09:00</published><updated>2022-02-22T00:00:00+09:00</updated><id>http://localhost:4000/php/couponsend</id><content type="html" xml:base="http://localhost:4000/php/couponsend/"><![CDATA[<h5 id="ë§¤ì¼-ìˆ˜ê°•ì¸ì¦í•œ-íšŒì›ì—-í•œí•´-íŠ¹ì •-ì¿ í°ì´-ë°œê¸‰ë˜ì–´ì•¼-í•œë‹¤ëŠ”-ë‚´ìš©ì˜-ìš”ì²­ì„-ë°›ì•˜ë‹¤">ë§¤ì¼ ìˆ˜ê°•ì¸ì¦í•œ íšŒì›ì— í•œí•´ íŠ¹ì • ì¿ í°ì´ ë°œê¸‰ë˜ì–´ì•¼ í•œë‹¤ëŠ” ë‚´ìš©ì˜ ìš”ì²­ì„ ë°›ì•˜ë‹¤.</h5>
<h5 id="ìš´ì˜íŒ€ì—ì„œ-ì¸ì¦í•œ-íšŒì›ì˜-idë¥¼-ê²Œì‹œíŒì—-ë“±ë¡í•˜ë©´-ë‚˜ëŠ”-í•´ë‹¹-ê²Œì‹œê¸€ì˜-idxê°’ë§Œ-í™•ì¸í•œ-í›„-ìˆ˜ë™ìœ¼ë¡œ-í˜¸ì¶œí•´ì£¼ë©´-ë˜ê²Œë”-í•˜ì˜€ë‹¤">ìš´ì˜íŒ€ì—ì„œ ì¸ì¦í•œ íšŒì›ì˜ IDë¥¼ ê²Œì‹œíŒì— ë“±ë¡í•˜ë©´, ë‚˜ëŠ” í•´ë‹¹ ê²Œì‹œê¸€ì˜ idxê°’ë§Œ í™•ì¸í•œ í›„ ìˆ˜ë™ìœ¼ë¡œ í˜¸ì¶œí•´ì£¼ë©´ ë˜ê²Œë” í•˜ì˜€ë‹¤.</h5>
<h5 id="ì¶”ê°€ê¸°ëŠ¥ì¹´ì¹´ì˜¤-ì•Œë¦¼í†¡---í˜„ì¬-íšŒì‚¬ì—ì„œëŠ”-ë³„ë„ë¡œ-ì‚¬ìš©í•˜ëŠ”-apiê°€-ìˆìŒ--ì¿ í°-ë°œê¸‰-ë¡œê·¸">ì¶”ê°€ê¸°ëŠ¥(ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ - í˜„ì¬ íšŒì‚¬ì—ì„œëŠ” ë³„ë„ë¡œ ì‚¬ìš©í•˜ëŠ” apiê°€ ìˆìŒ) + ì¿ í° ë°œê¸‰ ë¡œê·¸</h5>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="nb">session_start</span><span class="p">();</span>

<span class="nf">MySQLConnectDB</span><span class="p">();</span>

<span class="nv">$send_cupon</span> <span class="o">=</span> <span class="s2">"Y"</span><span class="p">;</span> <span class="c1">//ì¿ í°ë°œê¸‰ì—¬ë¶€</span>
<span class="nv">$event_idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//event_idx í˜„ì¬ ì—†ìŒ</span>
<span class="nv">$send_sms</span> <span class="o">=</span> <span class="s2">"N"</span><span class="p">;</span> <span class="c1">//sms ë°œì†¡ ì—¬ë¶€</span>
<span class="nv">$event_date</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">"Y-m-d"</span><span class="p">);</span> <span class="c1">//ì´ë²¤íŠ¸í™•ì¸ë‚ ì§œ ì˜¤ëŠ˜</span>

<span class="nv">$cuponname</span> <span class="o">=</span> <span class="s2">"ìˆ˜ê°•ì¸ì¦ í• ì¸ì¿ í°"</span><span class="p">;</span> <span class="c1">//ì¿ í°ì´ë¦„</span>
<span class="nv">$persent</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span> <span class="c1">//í• ì¸ìœ¨</span>
<span class="nv">$startdate</span> <span class="o">=</span> <span class="nv">$event_date</span><span class="p">;</span> <span class="c1">//ì‹œì‘ì¼</span>
<span class="nv">$timestamp</span> <span class="o">=</span> <span class="nb">strtotime</span><span class="p">(</span><span class="s2">"+7 days"</span><span class="p">);</span> <span class="c1">//ì¿ í°ìœ íš¨ê¸°ê°„</span>
<span class="nv">$enddate</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">"Y-m-d"</span><span class="p">,</span> <span class="nv">$timestamp</span><span class="p">);</span> <span class="c1">//ì¿ í°ì‚¬ìš© ì¢…ë£Œì¼</span>
<span class="nv">$cupon_state</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//ì¿ í°ì‚¬ìš©ì—¬ë¶€ 0-ì‚¬ìš©ì•ˆí•¨, 1-ì‚¬ìš©í•¨</span>
<span class="nv">$cuponNO</span><span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="nv">$condition_value</span> <span class="o">=</span> <span class="s2">"ì¡°ê±´ ì—†ìŒ"</span><span class="p">;</span>

<span class="nv">$idx</span> <span class="o">=</span> <span class="nv">$_GET</span><span class="p">[</span><span class="s1">'idx'</span><span class="p">];</span>
<span class="c1">//$idx = 7;</span>

<span class="nv">$event_type</span> <span class="o">=</span> <span class="s2">"0124_event_promotion"</span><span class="p">;</span>
<span class="nv">$today</span> <span class="o">=</span> <span class="nb">date</span><span class="p">(</span><span class="s2">"Ymd"</span><span class="p">);</span>

<span class="nv">$promotion_select_sql</span> <span class="o">=</span> <span class="s2">"SELECT context FROM 2022_event_promotion WHERE idx="</span><span class="mf">.</span><span class="nv">$idx</span><span class="p">;</span>
<span class="nv">$promotion_select_res</span> <span class="o">=</span> <span class="nf">MySQLQuery</span><span class="p">(</span><span class="nv">$promotion_select_sql</span><span class="p">);</span>
<span class="nv">$promotion_select_list</span> <span class="o">=</span> <span class="nf">MySQLFetchArray</span><span class="p">(</span><span class="nv">$promotion_select_res</span><span class="p">);</span>

<span class="nv">$useridarray</span> <span class="o">=</span> <span class="nv">$promotion_select_list</span><span class="p">[</span><span class="s1">'context'</span><span class="p">];</span>
<span class="nv">$useridarray</span> <span class="o">=</span> <span class="nb">explode</span><span class="p">(</span><span class="s2">","</span><span class="p">,</span><span class="nv">$useridarray</span><span class="p">);</span>

<span class="k">for</span><span class="p">(</span><span class="nv">$i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nv">$i</span><span class="o">&lt;</span><span class="nb">count</span><span class="p">(</span><span class="nv">$useridarray</span><span class="p">);</span> <span class="nv">$i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$userid</span> <span class="o">=</span> <span class="nb">trim</span><span class="p">(</span><span class="nv">$useridarray</span><span class="p">[</span><span class="nv">$i</span><span class="p">]);</span>
    <span class="c1">//ì¤‘ë³µë°œê¸‰ í™•ì¸</span>
    <span class="nv">$dup_sql</span> <span class="o">=</span> <span class="s2">"SELECT count(*) as cnt from 2022_condition_coupon_log"</span><span class="p">;</span>
    <span class="nv">$dup_sql</span> <span class="mf">.</span><span class="o">=</span> <span class="s2">" WHERE send_cupon= 'Y' AND event_type='</span><span class="nv">$event_type</span><span class="s2">' and userid='</span><span class="nv">$userid</span><span class="s2">'"</span><span class="p">;</span>
    <span class="nv">$dup_res</span> <span class="o">=</span> <span class="nf">MySQLQuery</span><span class="p">(</span><span class="nv">$dup_sql</span><span class="p">);</span>
    <span class="nv">$dup_list</span> <span class="o">=</span> <span class="nf">MySQLFetchArray</span><span class="p">(</span><span class="nv">$dup_res</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nv">$dup_list</span><span class="p">[</span><span class="s1">'cnt'</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">//ì¤‘ë³µë°œê¸‰ì¸ ê²½ìš°</span>
    <span class="p">{</span>
        <span class="nv">$msg</span> <span class="o">=</span> <span class="s2">"ì¤‘ë³µ ë°œê¸‰ì…ë‹ˆë‹¤. ID:"</span> <span class="mf">.</span> <span class="nv">$userid</span> <span class="mf">.</span> <span class="s2">"&lt;br&gt;"</span><span class="p">;;</span>
        <span class="nv">$send_cupon</span> <span class="o">=</span> <span class="s2">"N"</span><span class="p">;</span>
        <span class="nv">$send_sms</span> <span class="o">=</span> <span class="s2">"N"</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nv">$msg</span><span class="p">;</span>
        <span class="nv">$msg</span> <span class="o">=</span> <span class="nb">iconv</span><span class="p">(</span><span class="s2">"EUC-KR"</span><span class="p">,</span> <span class="s2">"UTF-8"</span><span class="p">,</span> <span class="nv">$msg</span><span class="p">);</span>
        <span class="nf">insert_condition_log</span><span class="p">(</span><span class="nv">$userid</span><span class="p">,</span> <span class="nv">$event_idx</span><span class="p">,</span> <span class="nv">$event_type</span><span class="p">,</span> <span class="nv">$condition_value</span><span class="p">,</span> <span class="nv">$send_cupon</span><span class="p">,</span> <span class="nv">$cuponNO</span><span class="p">,</span> <span class="nv">$send_sms</span><span class="p">,</span> <span class="nv">$event_date</span><span class="p">,</span> <span class="nv">$msg</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nv">$cuponNO</span> <span class="o">=</span> <span class="nf">cuponNO</span><span class="p">();</span>

        <span class="c1">//ì¡°ê±´ì—†ìŒ</span>
        <span class="nv">$send_cupon</span> <span class="o">=</span> <span class="s2">"Y"</span><span class="p">;</span>
        <span class="nv">$condition_value</span> <span class="o">=</span> <span class="s2">"ì¡°ê±´ì—†ìŒ"</span><span class="p">;</span>

        <span class="c1">//ì¿ í°ì˜ ì‚¬ìš© ì—¬ë¶€ í™•ì¸ ( ì‚¬ìš©í–ˆìœ¼ë©´ 1, ì‚¬ìš©í•˜ì§€ ì•Šì•˜ìœ¼ë©´ 0)</span>
        <span class="nv">$cupon_insert_sql</span> <span class="o">=</span> <span class="s2">"insert into my_cupon (userid,cuponname,couponNO,persent,startdate,enddate,cupon_state) "</span><span class="p">;</span>
        <span class="nv">$cupon_insert_sql</span> <span class="mf">.</span><span class="o">=</span> <span class="s2">"values ('</span><span class="nv">$userid</span><span class="s2">','</span><span class="nv">$cuponname</span><span class="s2">','</span><span class="nv">$cuponNO</span><span class="s2">.',</span><span class="nv">$persent</span><span class="s2">, '</span><span class="nv">$startdate</span><span class="s2">', '</span><span class="nv">$enddate</span><span class="s2">', '</span><span class="nv">$cupon_state</span><span class="s2">')"</span><span class="p">;</span>
        <span class="nv">$copon_insert_result</span> <span class="o">=</span> <span class="nf">MySQLQuery</span><span class="p">(</span><span class="nv">$cupon_insert_sql</span><span class="p">);</span>

        <span class="nv">$msg</span> <span class="o">=</span> <span class="s2">"ì¿ í°ì´ ë°œê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤. : "</span><span class="mf">.</span> <span class="nv">$userid</span><span class="mf">.</span> <span class="s2">"&lt;br&gt;"</span><span class="p">;</span>
        <span class="k">echo</span> <span class="nv">$msg</span><span class="p">;</span>
        <span class="nv">$msg</span> <span class="o">=</span> <span class="nb">iconv</span><span class="p">(</span><span class="s2">"EUC-KR"</span><span class="p">,</span> <span class="s2">"UTF-8"</span><span class="p">,</span> <span class="nv">$msg</span><span class="p">);</span>


        <span class="nv">$member_select_sql</span> <span class="o">=</span> <span class="s2">"SELECT * FROM tbl_member WHERE user_id='</span><span class="nv">$userid</span><span class="s2">'"</span><span class="p">;</span>
        <span class="nv">$member_select_res</span> <span class="o">=</span> <span class="nf">MySQLQuery</span><span class="p">(</span><span class="nv">$member_select_sql</span><span class="p">);</span>
            <span class="k">while</span> <span class="p">(</span><span class="nv">$member_select_list</span> <span class="o">=</span> <span class="nf">MySQLFetchArray</span><span class="p">(</span><span class="nv">$member_select_res</span><span class="p">))</span> <span class="p">{</span>
                <span class="nv">$sendanswer</span> <span class="o">=</span> <span class="nv">$member_select_list</span><span class="p">[</span><span class="s1">'sendanswer'</span><span class="p">];</span>
                <span class="nv">$member_id</span> <span class="o">=</span> <span class="nv">$member_select_list</span><span class="p">[</span><span class="s1">'user_id'</span><span class="p">];</span>
                <span class="nv">$member_name</span> <span class="o">=</span> <span class="nv">$member_select_list</span><span class="p">[</span><span class="s1">'user_name'</span><span class="p">];</span>
                <span class="nv">$member_phone</span> <span class="o">=</span> <span class="nv">$member_select_list</span><span class="p">[</span><span class="s1">'home_phone'</span><span class="p">];</span><span class="c1">//íœ´ëŒ€í° ë²ˆí˜¸</span>

                <span class="k">if</span><span class="p">(</span><span class="nv">$sendanswer</span> <span class="o">==</span> <span class="s2">"Y"</span> <span class="o">||</span> <span class="nv">$sendanswer</span> <span class="o">==</span> <span class="s2">"ì˜ˆ"</span><span class="p">)</span> <span class="p">{</span>
                    <span class="nv">$send_sms</span> <span class="o">=</span> <span class="s2">"Y"</span><span class="p">;</span>

                    <span class="c1">//ì•Œë¦¼í†¡ ì „ì†¡</span>
                    <span class="nv">$post_data</span> <span class="o">=</span> <span class="k">array</span><span class="p">(</span>
                        <span class="s2">"id"</span> <span class="o">=&gt;</span> <span class="nb">iconv</span><span class="p">(</span><span class="s1">'EUC-KR'</span><span class="p">,</span> <span class="s1">'UTF-8'</span><span class="p">,</span> <span class="nv">$member_id</span><span class="p">),</span>
                        <span class="s2">"name"</span> <span class="o">=&gt;</span> <span class="nb">iconv</span><span class="p">(</span><span class="s1">'EUC-KR'</span><span class="p">,</span> <span class="s1">'UTF-8'</span><span class="p">,</span> <span class="nv">$member_name</span><span class="p">),</span>
                        <span class="s2">"hp_num"</span> <span class="o">=&gt;</span> <span class="nb">iconv</span><span class="p">(</span><span class="s1">'EUC-KR'</span><span class="p">,</span> <span class="s1">'UTF-8'</span><span class="p">,</span> <span class="nv">$member_phone</span><span class="p">),</span>
                    <span class="p">);</span>

                    <span class="nv">$ch</span> <span class="o">=</span> <span class="nb">curl_init</span><span class="p">();</span>
                    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_URL</span><span class="p">,</span> <span class="s2">"https://url"</span><span class="p">);</span><span class="c1">//í•´ë‹¹ ë§í¬ë¥¼ í†µí•´ ì¹´ì¹´ì˜¤í†¡ ë°œì†¡ apië¥¼ ì‚¬ìš©</span>
                    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POST</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
                   

                    <span class="c1">//SSL í•„ìˆ˜ ì‹œì‘ - HTTPSì¼ë•Œ í•„ìˆ˜</span>
                    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYPEER</span><span class="p">,</span> <span class="kc">FALSE</span><span class="p">);</span>
                    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_SSL_VERIFYHOST</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
                    <span class="c1">//SSL í•„ìˆ˜ ë</span>
                    <span class="nb">curl_setopt</span><span class="p">(</span><span class="nv">$ch</span><span class="p">,</span> <span class="no">CURLOPT_POSTFIELDS</span><span class="p">,</span> <span class="nv">$post_data</span><span class="p">);</span>
                    <span class="nv">$output</span> <span class="o">=</span> <span class="nb">curl_exec</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

                    <span class="nv">$curl_errno</span> <span class="o">=</span> <span class="nb">curl_errno</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>
                    <span class="nv">$curl_error</span> <span class="o">=</span> <span class="nb">curl_error</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

                    <span class="nv">$info</span> <span class="o">=</span> <span class="nb">curl_getinfo</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

                    <span class="nb">curl_close</span><span class="p">(</span><span class="nv">$ch</span><span class="p">);</span>

                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="nv">$send_sms</span> <span class="o">=</span> <span class="s2">"N"</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="c1">//ë¡œê·¸ ë‚¨ê¸°ê¸°</span>
            <span class="nf">insert_condition_log</span><span class="p">(</span><span class="nv">$userid</span><span class="p">,</span> <span class="nv">$event_idx</span><span class="p">,</span> <span class="nv">$event_type</span><span class="p">,</span> <span class="nv">$condition_value</span><span class="p">,</span> <span class="nv">$send_cupon</span><span class="p">,</span> <span class="nv">$cuponNO</span><span class="p">,</span> <span class="nv">$send_sms</span><span class="p">,</span> <span class="nv">$event_date</span><span class="p">,</span> <span class="nv">$msg</span><span class="p">);</span>

    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>ë°‘ì—ëŠ” insert_condition_log í•¨ìˆ˜ ë‚´ìš©(ê³µí†µ íŒŒì¼ì— ë„£ì–´ì ¸ìˆë‹¤)</p>

<div class="language-php highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚â–’ í•¨ìˆ˜ëª… : insert_condition_log()                    â–’â”‚
  â”‚â–’ ì„¤  ëª… : ì¡°ê±´ ë°œê¸‰ ì¿ í° ë¡œê·¸                        â–’â”‚
  â”‚â–’                                                    â–’â”‚
  â”‚â–’ ì…ë ¥ê°’ : $userid : userid, $event_idx :ì´ë²¤íŠ¸ idx
  â”‚â–’ ì…ë ¥ê°’ : $event_type : ì´ë²¤íŠ¸type, $condition_value :ì¡°ê±´
  â”‚â–’ ì…ë ¥ê°’ : $send_cupon : ì¿ í°ë°œê¸‰ì—¬ë¶€, $cuponNO :ì¿ í°ë²ˆí˜¸
  â”‚â–’ ì…ë ¥ê°’ : $send_sms : smsë°œì‹ ì—¬ë¶€, $event_date : ì´ë²¤íŠ¸ì‹œì‘ì¼
  â”‚â–’ ì…ë ¥ê°’ : $message : ì‚¬ìš©ì ë©”ì‹œì§€
  â”‚â–’ ë¦¬í„´ê°’ : ì—†ìŒ                                      â–’â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜*/</span>
<span class="k">function</span> <span class="n">insert_condition_log</span><span class="p">(</span><span class="nv">$userid</span><span class="p">,</span> <span class="nv">$event_idx</span><span class="p">,</span> <span class="nv">$event_type</span><span class="p">,</span> <span class="nv">$condition_value</span><span class="p">,</span> <span class="nv">$send_cupon</span><span class="p">,</span> <span class="nv">$cuponNO</span><span class="p">,</span> <span class="nv">$send_sms</span><span class="p">,</span> <span class="nv">$event_date</span><span class="p">,</span> <span class="nv">$message</span><span class="p">)</span>
<span class="p">{</span>
  <span class="c1">//id, event_idx(ì´ë²¤íŠ¸ idx)-ì§€ê¸ˆì€ ì—†ìŒ, </span>
  <span class="c1">//event_type(ì´ë²¤íŠ¸íƒ€ì…)-ì§€ê¸ˆì€ 0124_event ê³ ì •, </span>
  <span class="c1">//condition_value(ì¡°ê±´:ê°’) ë‚´ìš©-ê²°ì œê¸ˆì•¡&gt;10ë§Œì›:$ê²°ì œê¸ˆì•¡</span>
  <span class="c1">//send_cupon(ë°œê¸‰ì—¬ë¶€)-Y,N couponNO, </span>
  <span class="c1">//send_sms(sms ì†¡ì‹ ì—¬ë¶€)-ì§€ê¸ˆì€N, </span>
  <span class="c1">//event_date(ì´ë²¤íŠ¸ë‚ ì§œ,ì˜¤ëŠ˜), reg_date(ë“±ë¡ì¼ì‹œ) condition_coupon_logì— ë‚´ìš© ì €ì¥</span>
	<span class="c1">//ì¡°ê±´ì— ì•ˆë§ì•„ë„ ë¬´ì¡°ê±´ logì—ëŠ” ê¸°ì…</span>
	<span class="nv">$message</span> <span class="o">=</span> <span class="nb">iconv</span><span class="p">(</span><span class="s2">"UTF-8"</span><span class="p">,</span> <span class="s2">"EUC-KR"</span><span class="p">,</span> <span class="nv">$message</span><span class="p">);</span>
	<span class="nv">$cupon_log_insert_sql</span> <span class="o">=</span> <span class="s2">" INSERT INTO í…Œì´ë¸”ëª…(userid, event_idx, event_type, condition_value, send_cupon, couponNO, send_sms, event_date, message, reg_date)"</span><span class="p">;</span>
	<span class="nv">$cupon_log_insert_sql</span> <span class="mf">.</span><span class="o">=</span> <span class="s2">" VALUES ('</span><span class="nv">$userid</span><span class="s2">','</span><span class="nv">$event_idx</span><span class="s2">','</span><span class="nv">$event_type</span><span class="s2">', '</span><span class="nv">$condition_value</span><span class="s2">', '</span><span class="nv">$send_cupon</span><span class="s2">', '</span><span class="nv">$cuponNO</span><span class="s2">','</span><span class="nv">$send_sms</span><span class="s2">', '</span><span class="nv">$event_date</span><span class="s2">', '</span><span class="nv">$message</span><span class="s2">', NOW())"</span><span class="p">;</span>
	<span class="nv">$cupon_log_result</span> <span class="o">=</span> <span class="nf">MySQLQuery</span><span class="p">(</span><span class="nv">$cupon_log_insert_sql</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="ì´ë ‡ê²Œ-ì†ŒìŠ¤ì½”ë“œë¡œ-ì§œì—¬ì§„-couponphp-íŒŒì¼ì„-ë„ë©”ì¸ì—-idxê°’ê³¼-í•¨ê»˜-ìˆ˜ë™ìœ¼ë¡œ-ì…ë ¥í•˜ë©´">ì´ë ‡ê²Œ ì†ŒìŠ¤ì½”ë“œë¡œ ì§œì—¬ì§„ coupon.php íŒŒì¼ì„ ë„ë©”ì¸ì— idxê°’ê³¼ í•¨ê»˜ ìˆ˜ë™ìœ¼ë¡œ ì…ë ¥í•˜ë©´</h5>
<h5 id="í•´ë‹¹í•˜ëŠ”-ì‚¬ëŒë“¤ì—ê²Œ-í•´ë‹¹-ì¿ í°ìˆ˜ê°•ì¸ì¦-í• ì¸ì¿ í°ì´-ìë™ìœ¼ë¡œ-ë°œê¸‰ë˜ê³ -ì¹´ì¹´ì˜¤-ì•ˆë‚´í†¡ë„-ë°œì†¡ëœë‹¤">í•´ë‹¹í•˜ëŠ” ì‚¬ëŒë“¤ì—ê²Œ í•´ë‹¹ ì¿ í°(ìˆ˜ê°•ì¸ì¦ í• ì¸ì¿ í°)ì´ ìë™ìœ¼ë¡œ ë°œê¸‰ë˜ê³  ì¹´ì¹´ì˜¤ ì•ˆë‚´í†¡ë„ ë°œì†¡ëœë‹¤.</h5>
<h5 id="ex-httpswwwtestkrcouponphpidx7">EX) https://www.test.kr/coupon.php?idx=7</h5>]]></content><author><name>Ashley</name></author><category term="Php" /><category term="php" /><summary type="html"><![CDATA[ë§¤ì¼ ìˆ˜ê°•ì¸ì¦í•œ íšŒì›ì— í•œí•´ íŠ¹ì • ì¿ í°ì´ ë°œê¸‰ë˜ì–´ì•¼ í•œë‹¤ëŠ” ë‚´ìš©ì˜ ìš”ì²­ì„ ë°›ì•˜ë‹¤. ìš´ì˜íŒ€ì—ì„œ ì¸ì¦í•œ íšŒì›ì˜ IDë¥¼ ê²Œì‹œíŒì— ë“±ë¡í•˜ë©´, ë‚˜ëŠ” í•´ë‹¹ ê²Œì‹œê¸€ì˜ idxê°’ë§Œ í™•ì¸í•œ í›„ ìˆ˜ë™ìœ¼ë¡œ í˜¸ì¶œí•´ì£¼ë©´ ë˜ê²Œë” í•˜ì˜€ë‹¤. ì¶”ê°€ê¸°ëŠ¥(ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡ - í˜„ì¬ íšŒì‚¬ì—ì„œëŠ” ë³„ë„ë¡œ ì‚¬ìš©í•˜ëŠ” apiê°€ ìˆìŒ) + ì¿ í° ë°œê¸‰ ë¡œê·¸ @session_start(); MySQLConnectDB(); $send_cupon = "Y"; //ì¿ í°ë°œê¸‰ì—¬ë¶€ $event_idx = 0; //event_idx í˜„ì¬ ì—†ìŒ $send_sms = "N"; //sms ë°œì†¡ ì—¬ë¶€ $event_date = date("Y-m-d"); //ì´ë²¤íŠ¸í™•ì¸ë‚ ì§œ ì˜¤ëŠ˜ $cuponname = "ìˆ˜ê°•ì¸ì¦ í• ì¸ì¿ í°"; //ì¿ í°ì´ë¦„ $persent = 50; //í• ì¸ìœ¨ $startdate = $event_date; //ì‹œì‘ì¼ $timestamp = strtotime("+7 days"); //ì¿ í°ìœ íš¨ê¸°ê°„ $enddate = date("Y-m-d", $timestamp); //ì¿ í°ì‚¬ìš© ì¢…ë£Œì¼ $cupon_state = 0; //ì¿ í°ì‚¬ìš©ì—¬ë¶€ 0-ì‚¬ìš©ì•ˆí•¨, 1-ì‚¬ìš©í•¨ $cuponNO= 0; $condition_value = "ì¡°ê±´ ì—†ìŒ"; $idx = $_GET['idx']; //$idx = 7; $event_type = "0124_event_promotion"; $today = date("Ymd"); $promotion_select_sql = "SELECT context FROM 2022_event_promotion WHERE idx=".$idx; $promotion_select_res = MySQLQuery($promotion_select_sql); $promotion_select_list = MySQLFetchArray($promotion_select_res); $useridarray = $promotion_select_list['context']; $useridarray = explode(",",$useridarray); for($i=0; $i&lt;count($useridarray); $i++) { $userid = trim($useridarray[$i]); //ì¤‘ë³µë°œê¸‰ í™•ì¸ $dup_sql = "SELECT count(*) as cnt from 2022_condition_coupon_log"; $dup_sql .= " WHERE send_cupon= 'Y' AND event_type='$event_type' and userid='$userid'"; $dup_res = MySQLQuery($dup_sql); $dup_list = MySQLFetchArray($dup_res); if ($dup_list['cnt'] &gt; 0) //ì¤‘ë³µë°œê¸‰ì¸ ê²½ìš° { $msg = "ì¤‘ë³µ ë°œê¸‰ì…ë‹ˆë‹¤. ID:" . $userid . "&lt;br&gt;";; $send_cupon = "N"; $send_sms = "N"; echo $msg; $msg = iconv("EUC-KR", "UTF-8", $msg); insert_condition_log($userid, $event_idx, $event_type, $condition_value, $send_cupon, $cuponNO, $send_sms, $event_date, $msg); } else { $cuponNO = cuponNO(); //ì¡°ê±´ì—†ìŒ $send_cupon = "Y"; $condition_value = "ì¡°ê±´ì—†ìŒ"; //ì¿ í°ì˜ ì‚¬ìš© ì—¬ë¶€ í™•ì¸ ( ì‚¬ìš©í–ˆìœ¼ë©´ 1, ì‚¬ìš©í•˜ì§€ ì•Šì•˜ìœ¼ë©´ 0) $cupon_insert_sql = "insert into my_cupon (userid,cuponname,couponNO,persent,startdate,enddate,cupon_state) "; $cupon_insert_sql .= "values ('$userid','$cuponname','$cuponNO.',$persent, '$startdate', '$enddate', '$cupon_state')"; $copon_insert_result = MySQLQuery($cupon_insert_sql); $msg = "ì¿ í°ì´ ë°œê¸‰ë˜ì—ˆìŠµë‹ˆë‹¤. : ". $userid. "&lt;br&gt;"; echo $msg; $msg = iconv("EUC-KR", "UTF-8", $msg); $member_select_sql = "SELECT * FROM tbl_member WHERE user_id='$userid'"; $member_select_res = MySQLQuery($member_select_sql); while ($member_select_list = MySQLFetchArray($member_select_res)) { $sendanswer = $member_select_list['sendanswer']; $member_id = $member_select_list['user_id']; $member_name = $member_select_list['user_name']; $member_phone = $member_select_list['home_phone'];//íœ´ëŒ€í° ë²ˆí˜¸ if($sendanswer == "Y" || $sendanswer == "ì˜ˆ") { $send_sms = "Y"; //ì•Œë¦¼í†¡ ì „ì†¡ $post_data = array( "id" =&gt; iconv('EUC-KR', 'UTF-8', $member_id), "name" =&gt; iconv('EUC-KR', 'UTF-8', $member_name), "hp_num" =&gt; iconv('EUC-KR', 'UTF-8', $member_phone), ); $ch = curl_init(); curl_setopt($ch, CURLOPT_URL, "https://url");//í•´ë‹¹ ë§í¬ë¥¼ í†µí•´ ì¹´ì¹´ì˜¤í†¡ ë°œì†¡ apië¥¼ ì‚¬ìš© curl_setopt($ch, CURLOPT_POST, 1); //SSL í•„ìˆ˜ ì‹œì‘ - HTTPSì¼ë•Œ í•„ìˆ˜ curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE); curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0); //SSL í•„ìˆ˜ ë curl_setopt($ch, CURLOPT_POSTFIELDS, $post_data); $output = curl_exec($ch); $curl_errno = curl_errno($ch); $curl_error = curl_error($ch); $info = curl_getinfo($ch); curl_close($ch); } else { $send_sms = "N"; } } //ë¡œê·¸ ë‚¨ê¸°ê¸° insert_condition_log($userid, $event_idx, $event_type, $condition_value, $send_cupon, $cuponNO, $send_sms, $event_date, $msg); } } ë°‘ì—ëŠ” insert_condition_log í•¨ìˆ˜ ë‚´ìš©(ê³µí†µ íŒŒì¼ì— ë„£ì–´ì ¸ìˆë‹¤) /* â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â–’ í•¨ìˆ˜ëª… : insert_condition_log() â–’â”‚ â”‚â–’ ì„¤ ëª… : ì¡°ê±´ ë°œê¸‰ ì¿ í° ë¡œê·¸ â–’â”‚ â”‚â–’ â–’â”‚ â”‚â–’ ì…ë ¥ê°’ : $userid : userid, $event_idx :ì´ë²¤íŠ¸ idx â”‚â–’ ì…ë ¥ê°’ : $event_type : ì´ë²¤íŠ¸type, $condition_value :ì¡°ê±´ â”‚â–’ ì…ë ¥ê°’ : $send_cupon : ì¿ í°ë°œê¸‰ì—¬ë¶€, $cuponNO :ì¿ í°ë²ˆí˜¸ â”‚â–’ ì…ë ¥ê°’ : $send_sms : smsë°œì‹ ì—¬ë¶€, $event_date : ì´ë²¤íŠ¸ì‹œì‘ì¼ â”‚â–’ ì…ë ¥ê°’ : $message : ì‚¬ìš©ì ë©”ì‹œì§€ â”‚â–’ ë¦¬í„´ê°’ : ì—†ìŒ â–’â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜*/ function insert_condition_log($userid, $event_idx, $event_type, $condition_value, $send_cupon, $cuponNO, $send_sms, $event_date, $message) { //id, event_idx(ì´ë²¤íŠ¸ idx)-ì§€ê¸ˆì€ ì—†ìŒ, //event_type(ì´ë²¤íŠ¸íƒ€ì…)-ì§€ê¸ˆì€ 0124_event ê³ ì •, //condition_value(ì¡°ê±´:ê°’) ë‚´ìš©-ê²°ì œê¸ˆì•¡&gt;10ë§Œì›:$ê²°ì œê¸ˆì•¡ //send_cupon(ë°œê¸‰ì—¬ë¶€)-Y,N couponNO, //send_sms(sms ì†¡ì‹ ì—¬ë¶€)-ì§€ê¸ˆì€N, //event_date(ì´ë²¤íŠ¸ë‚ ì§œ,ì˜¤ëŠ˜), reg_date(ë“±ë¡ì¼ì‹œ) condition_coupon_logì— ë‚´ìš© ì €ì¥ //ì¡°ê±´ì— ì•ˆë§ì•„ë„ ë¬´ì¡°ê±´ logì—ëŠ” ê¸°ì… $message = iconv("UTF-8", "EUC-KR", $message); $cupon_log_insert_sql = " INSERT INTO í…Œì´ë¸”ëª…(userid, event_idx, event_type, condition_value, send_cupon, couponNO, send_sms, event_date, message, reg_date)"; $cupon_log_insert_sql .= " VALUES ('$userid','$event_idx','$event_type', '$condition_value', '$send_cupon', '$cuponNO','$send_sms', '$event_date', '$message', NOW())"; $cupon_log_result = MySQLQuery($cupon_log_insert_sql); } ì´ë ‡ê²Œ ì†ŒìŠ¤ì½”ë“œë¡œ ì§œì—¬ì§„ coupon.php íŒŒì¼ì„ ë„ë©”ì¸ì— idxê°’ê³¼ í•¨ê»˜ ìˆ˜ë™ìœ¼ë¡œ ì…ë ¥í•˜ë©´ í•´ë‹¹í•˜ëŠ” ì‚¬ëŒë“¤ì—ê²Œ í•´ë‹¹ ì¿ í°(ìˆ˜ê°•ì¸ì¦ í• ì¸ì¿ í°)ì´ ìë™ìœ¼ë¡œ ë°œê¸‰ë˜ê³  ì¹´ì¹´ì˜¤ ì•ˆë‚´í†¡ë„ ë°œì†¡ëœë‹¤. EX) https://www.test.kr/coupon.php?idx=7]]></summary></entry></feed>